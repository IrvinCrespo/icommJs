var mongoose = require('mongoose');
var moment = require("moment-timezone");
var Schema = mongoose.Schema, ObjectId = mongoose.Types.ObjectId;

var mongo_host = process.env.MONGO_HOST;
var mongo_user = process.env.MONGO_USER;
var mongo_pass = process.env.MONGO_PASS;
var mongo_db = process.env.MONGO_DB;
var mongo_port = process.env.MONGO_PORT || 27017;
var uri_connection = "";
if(mongo_user && mongo_pass){
    uri_connection = "mongodb://"+mongo_user+":"+mongo_pass+"@"+mongo_host+":"+mongo_port+"/"+mongo_db
}else{
    uri_connection = "mongodb://"+mongo_host+":"+mongo_port+"/"+mongo_db;
}

module.exports = {
    connection:mongoose.createConnection(uri_connection,{ useNewUrlParser: true }),
    mongoose:mongoose,
    ObjectId:ObjectId
} 

